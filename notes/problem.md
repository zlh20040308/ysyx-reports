---
marp: true
---

# Chisel 中 def 和 val 的 区别  

---  

![height:18cm bg left](../imgs/p5.png)  
我不明白为什么这里一部分用val，另一部分用def，以下是ChatGPT给出的解释  
- val:
在定义时求值，并在整个对象生命周期内保持不变。
在硬件描述中，如果用 val 来定义一个硬件对象，如 UInt，那么这个对象在整个生命周期内都是相同的实例。
- def:
每次调用时都会重新求值。
在硬件描述中，每次调用 def 方法时都会生成一个新的硬件对象实例。

---  

但是依旧不解决问题，因为这里的def都是是常量，所以我认为这里完全可以用val来代替，我唯一能想到的是如果用 def ，那么后面可以用 override 关键字进行重写，但是整个 riscv-mini 工程中并没有对这些值进行重写  

还有就是我注意到只要不是明确的给出字面值，riscv-mini 都会将常量用 def 来定义（不确定） 

为什么要这样处理，目的是什么？   

---  

![height:18cm bg left](../imgs/Scala_Problem.png)  

类`AluSimple`继承了`Alu`，但是没有显式地实现`width`方法，只有一个同名的构造参数  

这就很奇怪，为什么`val`在这里起到一个实现了抽象成员函数的作用  


